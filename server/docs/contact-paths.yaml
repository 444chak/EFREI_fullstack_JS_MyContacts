paths:
  /contacts:
    get:
      summary: Get all contacts
      description: Retrieve all contacts for the authenticated user
      tags: [Contacts]
      security:
        - bearerAuth: []
      responses:
        200:
          description: List of contacts retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ContactListResponse"
              example:
                - _id: 507f1f77bcf86cd799439012
                  firstName: John
                  lastName: Doe
                  phone: +1234567890
                  contactOf: 507f1f77bcf86cd799439011
                  createdAt: 2023-01-01T00:00:00.000Z
                  updatedAt: 2023-01-01T00:00:00.000Z
                - _id: 507f1f77bcf86cd799439013
                  firstName: Jane
                  lastName: Smith
                  phone: +0987654321
                  contactOf: 507f1f77bcf86cd799439011
                  createdAt: 2023-01-01T00:00:00.000Z
                  updatedAt: 2023-01-01T00:00:00.000Z
        401:
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                no_token:
                  summary: No token provided
                  value:
                    message: No token provided
                invalid_token:
                  summary: Invalid token
                  value:
                    message: Invalid token
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    post:
      summary: Create a new contact
      description: Create a new contact for the authenticated user
      tags: [Contacts]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ContactRequest"
            example:
              firstName: John
              lastName: Doe
              phone: +1234567890
      responses:
        201:
          description: Contact created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Contact"
              example:
                _id: 507f1f77bcf86cd799439012
                firstName: John
                lastName: Doe
                phone: +1234567890
                contactOf: 507f1f77bcf86cd799439011
                createdAt: 2023-01-01T00:00:00.000Z
                updatedAt: 2023-01-01T00:00:00.000Z
        400:
          description: Bad request - Missing required fields
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                message: All fields are required
        401:
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                no_token:
                  summary: No token provided
                  value:
                    message: No token provided
                invalid_token:
                  summary: Invalid token
                  value:
                    message: Invalid token
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /contacts/{id}:
    patch:
      summary: Update a contact
      description: Partially update an existing contact by ID for the authenticated user
      tags: [Contacts]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The contact ID
          schema:
            type: string
          example: 507f1f77bcf86cd799439012
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/ContactUpdateRequest"
            example:
              firstName: John
              phone: +1234567890
      responses:
        200:
          description: Contact updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Contact"
              example:
                _id: 507f1f77bcf86cd799439012
                firstName: John
                lastName: Doe
                phone: +1234567890
                contactOf: 507f1f77bcf86cd799439011
                createdAt: 2023-01-01T00:00:00.000Z
                updatedAt: 2023-01-01T00:00:00.000Z
        401:
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                no_token:
                  summary: No token provided
                  value:
                    message: No token provided
                invalid_token:
                  summary: Invalid token
                  value:
                    message: Invalid token
        404:
          description: Contact not found or not authorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                message: Contact not found or not authorized
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

    delete:
      summary: Delete a contact
      description: Delete an existing contact by ID for the authenticated user
      tags: [Contacts]
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          description: The contact ID
          schema:
            type: string
          example: 507f1f77bcf86cd799439012
      responses:
        200:
          description: Contact deleted successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/DeleteResponse"
              example:
                message: Contact deleted successfully
        401:
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              examples:
                no_token:
                  summary: No token provided
                  value:
                    message: No token provided
                invalid_token:
                  summary: Invalid token
                  value:
                    message: Invalid token
        404:
          description: Contact not found or not authorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
              example:
                message: Contact not found or not authorized
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
